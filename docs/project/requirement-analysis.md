# 需求分析

## 1. 利益相关者

- 开发者：软工team——Qiaqia队
- 客户：TSN
- 用户：学生，教师和管理员

## 2. 编写目的

本项目为学生选课系统，是一个为方便学生选择课程的服务平台，本文档的目的是为了解决系统开发的需求分析。

## 3. 用户需求

系统用户由教师，学生以及管理员三类组成。

- 学生
  + 进行选课和撤课操作，选课考虑分时间段选择。
  + 查询当前学期的所有课程，显示课程的信息，包括课时，学分，课名，课程号，上课时间和地点，授课老师，开设学期，余量，容量，院系。
  + 根据院系，授课老师和课程号查询某一门课。
  + 查询个人信息，包括姓名，学号，院系，入学年份。
  + 修改密码。
  + 查询所有课的成绩，包括总评。
  + 总成绩的查询。


- 教师
  + 查询个人信息，包括学工号，姓名，院系。
  + 查询所授的课程。
  + 修改密码。
  + 查询某一开设的课的具体信息，包括选修这门课的学生信息和课程信息。
  + 登记学生成绩。



- 管理员
  + 开设课程，指派课程信息。
  + 查询个人信息，包括姓名，学工号。
  + 查询和修改老师和学生的个人信息。
  + 修改密码。
  + 强制加课和撤课，指定学生信息和课程信息。
  + 增加学生用户和老师用户。
  + 查询所有课程。

## 4. 系统需求
- 功能需求
  + 维护学生的个人基本信息，实现对学生个人信息的增、删、改、查，包括学生的姓名，学号，院系，入学年份。
  + 维护教师的个人基本信息，实现对教师个人信息的增、删、改、查，包括教师的学工号，姓名，院系。
  + 维护管理员的个人基本信息，实现对管理员个人信息的增、删、改、查，包括管理员的学工号，姓名。
  + 实现登陆子系统，根据管理员，学生，教师这三者不同的身份，给出不同的权限，在系统中根据身份判断其相应具有的权限，进行不同的操作。
  + 实现排课子系统，能够根据时间段进行排课，并检测课程是否冲突。
  + 实现选课子系统，包括课程浏览查询，选课和退选课程。
- 性能需求 
  + 该系统应具有较高的并发量和数据吞吐量，以便让更多的学生更加顺畅的登陆系统进行操作。
  + 在系统上操作时，系统的响应时间应尽量短，反应的时间应当在2秒以内，以便于有一个更舒适的体验。
  + 该系统应具有良好的运行效率，以便于让学生有一个更好的体验。
- 可靠性需求
  + 该系统应该具有良好的安全性，可靠性和可维护性，能够长时间无故障运行。
- 开发性需求
  + 系统应具有相当的灵活性和稳定性，能够很好的适应信息管理的多边形。
- 可扩展性需求
  + 系统设计应体现扩展性要求，可以加入其他系统的应用。 
  
## 5. 数据库ER图

![数据库ER图](./imgs/ER_diagram.png)

## 6. 数据流图

1. 顶层数据流图
   ![顶层数据流图](./imgs/DFD0.drawio.png)
2. 1层数据流图
   ![1层数据流图](./imgs/DFD1.drawio.png)
3. 2层数据流图
   ![2层数据流图](./imgs/DFD2.drawio.png)
4. 3层数据流图
   ![3层数据流图](./imgs/DFD3.drawio.png)







# 需求分析 —— LZL部分

## 需求概述

### 运行环境

本系统需要运行在Linux(Ubuntu)系统下，并且需要安装以下软件：JDK11、PostgreSQL、Nginx等。

## 运行环境

### 软件环境

|            | 名称          | 版本     | 概述                                                                                        |
| ---------- | ------------- | -------- | ------------------------------------------------------------------------------------------- |
| 操作系统   | Ubuntu(Linux) | 20.04LTS | 您也可选Windows 10。                                                                        |
| 数据库平台 | PostgreSQL    | 14.2     | 为后端服务提供关系型数据库支持。                                                            |
| 应用平台   | Java          | JDK11    | 后端服务采用Java语言编写，并采用JDK11作为开发套件，所以可能需要最低版本为11的Java运行环境。 |
| Web容器    | Nginx         | 1.21.6   | 作为承载Web静态资源的容器，同时支持反向代理将API调用代理到后端服务上。                      |

您也可以在一台性能较好的服务器上安装`Docker`与`Docker Compose`，使用我们提供的`docker compose`配置，在`Docker`中运行本系统，无需考虑环境配置。

### 硬件环境

| 服务器       | 推荐配置                                 |
| ------------ | ---------------------------------------- |
| 应用服务器   | CPU核心数：2；内存：8GB                  |
| 数据库服务器 | CPU核心数：2；内存：4GB；数据容量：500GB |

## 需求规定

### 软件总体功能分析

本系统主要满足学生选撤课、教师调整课程等功能，需要满足以下要求：

- 管理用户的登录、注册、个人信息等。
- 可鉴别用户身份，区分用户角色，以便确定用户可进行的操作。比如学生是不可以进行开课操作的。
- 存储用户信息、课程信息、学期信息、学院信息等等。
- 根据用户角色的不同，可以完成选课、撤课、开课、强制选撤课、查看课程信息等功能。
- 可以完成复杂的课程查询，比如按学院查询、按教师查询，多个条件组合查询等。
- 学生可以查询自己已选课表、课程成绩等。

```mermaid
graph LR
  System[选课系统]
  
  User[用户模块]
  System --> User
  User --> 注册
  User --> 修改密码
  User --> 查询个人信息
  
  UserManagement[用户管理模块--管理员]
  System --> UserManagement
  UserManagement --> 添加用户
  UserManagement --> 删除用户
  UserManagement --> 查询用户
  UserManagement --> 修改用户信息

  Authentic[认证/授权模块]
  System --> Authentic
  Authentic --> 登录
  Authentic --> 校验角色

  Course[课程模块]
  System --> Course
    
    Course --> CourseQuery[课程查询及条件]
    CourseQuery --> 开课院系 --> 综合查询
    CourseQuery --> 开课教师 --> 综合查询
    CourseQuery --> 开课课头 --> 综合查询
    CourseQuery --> 是否有余量 --> 综合查询

    Course --> 选课
    Course --> 撤课
    Course --教师--> 查询选课学生
    Course --高权限--> 强制选课
    Course --高权限--> 强制撤课
  
  Schedule[课表模块--学生]
  System --> Schedule
  Schedule --> 查看课表
  Schedule --> 查询成绩
  Schedule --> 查询总评
```

### 功能需求

TODO：用例图、子用例图、用例描述（XYX/LZL）$$


# 需求分析  ——HHX部分

##  顺序图（3.2.4）

1.  非管理员查询特征课程的若干信息
   ![查询课程信息](.\imgs\Seq_figure_ViewingInfo.png)
  此图描述了非管理员查询特征课程的若干信息的功能。
  非管理员在用户登录验证之后，向教务系统展示模块请求查询特征课程的相关信息。教务系统展示模块在接收到相关的
  请求信息后，此模块向教务信息数据库发送“获取特征课程列表”的请求。数据库在接收到此特征课程列表的请求后，不
  断搜索满足特征的课程并获取这些课程的课程名直至找到所有满足要求的课程。接着教务信息数据库会返回整理过后的
  目标课程列表给教务系统展示模块。教务系统展示模块在接收到目标课程列表后，从课程列表中提取出课程名，根据搜
  索目标生成搜索项，接着按照该搜索项向教务信息数据库提交获取目标课程的目标信息的搜索请求。教务信息数据库在
  收到此请求后，搜索目标课程，获取目标课程信息并返回目标信息。教务系统和教务信息数据库不断重复此操作直至课
  程列表为空。最后教务信息展示模块将整理后的搜索信息展示给非管理员完成此功能的全部流程。


2.  管理员创建新账户
   ![创建新账户](.\imgs\Seq_figure_CreatingAcoutant.png)
此图描述了管理员创建新账户的功能。
管理员在用户登录验证之后，管理员向教务系统展示模块提交创建新账户的请求。教务系统在收到此请求后，向教务信息
数据库发送申请新账户的请求，数据库在收到此请求后创建新的空账户并且返回“请求设置新账户权限”的提示。教务系统
收到此请求后把提示展现给管理员。管理员在设置好新账户权限后，将设置提交给教务系统展示模块后，教务系统将新账
户权限设置提交给教务信息数据库。数据库根据提交的设置来设置新账户的权限。数据库在完成新账户的权限设置后，向
教务系统发送“补充新账户基本信息”的请求。教务系统在接收到此请求后，将该请求提示给管理员。管理员在组织好新账
户的基本信息后，将新账户的基本信息展示给教务信息数据库。数据库在接收到新账户的基本信息后设置新账户的基本信
息。在数据库完成基本信息的设置后，返回给教务系统“新账户已经创建成功”的提示。最后，教务系统提示管理员新账户
已经设置成功。功能的全流程完毕。


3.  学生选课
   ![学生选课](.\imgs\Seq_figure_SelectingCourses.png)
此图描述了学生进行选课的功能。
学生在用户登录验证之后，向教务系统提交“开始进行选课”的申请。为了能够让学生浏览待选课程列表，教务系统向数据
库请求特定类型课表。数据库根据请求课表的类型特征，在课程中搜索满足此特定类型的课程，在得到满足条件的所有课
程后将整理后的课程列表返回给教务系统展示模块。教务系统展示模块将待选课表展示给学生。学生在选好课程后，向教
务系统选课模块提交申请课程表单。教务系统的选课模块在接收到选课申请表单后一一处理针对每一课程的选课申请。如
果该选课申请不应被满足，则向教务系统展示模块返回“申请被拒”的信息，教务系统展示模块提示学生该课程的选课申请
被拒绝；如果该选课申请应该被满足，则选课模块将该课程信息写入学生课表并将该学生信息写入课程列表。在数据库完
成此信息写入工作后，数据库向选课模块返回写入成功确认。在接收到信息写入成功的确认后，向教务系统中的展示模块
提示“该选课申请已被同意”。接着教务系统展示模块提示学生该课程的选课申请已经成功，完成整个功能的流程。



##  系统概述（1）
本选课系统致力于在综合性大学场景下，服务于“管理员-学生-教师”客户群体的周期性、结构性选课活动和教学管理，
满足在选课活动和日常教学中学生选课、 教务信息管理统计的功能，并且致力于优化系统在选课公正性、高密度访问
量冲击抗性、安全性方面的性能指标。


##  概述（3.2.1）
从系统功能层面来讲，本系统的主要两大功能包括教务信息管理和选课匹配需求。关于教务信息管理，学生可以查看所选
课程的相关信息（例如课程类别、学分、任课教师、授课地点等）。教师可以查看和输入所授课班级的相关信息（例如班
级学生名单、学生成绩等）。并且系统中的教务信息管理模块支持复杂条件搜索，支持例如“按课程类别搜索”、“按所选
学期搜索”、“按课程成绩搜索”等条件搜索，能够为客户群体提供满足特定条件的课程子集的特定信息搜索（“课程特征”
+“课程子信息”）。除了能够支持教务信息的直接呈现，我们也会在系统中内置相关信息统计模块帮助客户完成对于教务
信息的分析。

从客户层面来说，系统需要服务的三种角色分别为管理员、学生和教师。
  对于管理员，本系统需要满足的功能有：
  - 创建新账户、设置新账户权限和录入新账户的基本信息
  - 设置选课课程表
  - 强制撤课、强制加课

  对于学生，本系统需要满足的功能有：
  - 浏览可选课程列表、提交选课申请、知晓选课结果
  - 浏览所选课程的相关信息和统计

  对于教师，本系统需要满足的功能有：
  - 浏览所负责课程列表和具体课程信息
  - 录入所负责课程的部分信息（例如成绩）

# 需求分析

## 1. 利益相关者

- 开发者：软工team——Qiaqia队
- 客户：TSN
- 用户：学生，教师和管理员

## 2. 编写目的

本项目为学生选课系统，是一个为方便学生选择课程的服务平台，本文档的目的是为了解决系统开发的需求分析。

## 3. 用户需求

系统用户由教师，学生以及管理员三类组成。

- 学生
  + 进行选课和撤课操作，选课考虑分时间段选择。
  + 查询当前学期的所有课程，显示课程的信息，包括课时，学分，课名，课程号，上课时间和地点，授课老师，开设学期，余量，容量，院系。
  + 根据院系，授课老师和课程号查询某一门课。
  + 查询个人信息，包括姓名，学号，院系，入学年份。
  + 修改密码。
  + 查询所有课的成绩，包括总评。
  + 总成绩的查询。


- 教师
  + 查询个人信息，包括学工号，姓名，院系。
  + 查询所授的课程。
  + 修改密码。
  + 查询某一开设的课的具体信息，包括选修这门课的学生信息和课程信息。
  + 登记学生成绩。



- 管理员
  + 开设课程，指派课程信息。
  + 查询个人信息，包括姓名，学工号。
  + 查询和修改老师和学生的个人信息。
  + 修改密码。
  + 强制加课和撤课，指定学生信息和课程信息。
  + 增加学生用户和老师用户。
  + 查询所有课程。

## 4. 系统需求
- 功能需求
  + 维护学生的个人基本信息，实现对学生个人信息的增、删、改、查，包括学生的姓名，学号，院系，入学年份。
  + 维护教师的个人基本信息，实现对教师个人信息的增、删、改、查，包括教师的学工号，姓名，院系。
  + 维护管理员的个人基本信息，实现对管理员个人信息的增、删、改、查，包括管理员的学工号，姓名。
  + 实现登陆子系统，根据管理员，学生，教师这三者不同的身份，给出不同的权限，在系统中根据身份判断其相应具有的权限，进行不同的操作。
  + 实现排课子系统，能够根据时间段进行排课，并检测课程是否冲突。
  + 实现选课子系统，包括课程浏览查询，选课和退选课程。
- 性能需求 
  + 该系统应具有较高的并发量和数据吞吐量，以便让更多的学生更加顺畅的登陆系统进行操作。
  + 在系统上操作时，系统的响应时间应尽量短，反应的时间应当在2秒以内，以便于有一个更舒适的体验。
  + 该系统应具有良好的运行效率，以便于让学生有一个更好的体验。
- 可靠性需求
  + 该系统应该具有良好的安全性，可靠性和可维护性，能够长时间无故障运行。
- 开发性需求
  + 系统应具有相当的灵活性和稳定性，能够很好的适应信息管理的多边形。
- 可扩展性需求
  + 系统设计应体现扩展性要求，可以加入其他系统的应用。 
  
## 5. 数据库ER图

![数据库ER图](./imgs/ER_diagram.png)

## 6. 数据流图

1. 顶层数据流图
   ![顶层数据流图](./imgs/DFD.drawio.png)
2. 1层数据流图
   ![1层数据流图](./imgs/DFD0.drawio.png)
3. 2层数据流图
   ![2层数据流图](./imgs/DFD1.drawio.png)
   ![2层数据流图](./imgs/DFD2.drawio.png)
   ![2层数据流图](./imgs/DFD3.drawio.png)

## 需求概述 ——tsn部分

***

### 1. 目标

#### &emsp;&emsp;1.1. 开发意图

&emsp;&emsp;本系统旨在使学生更方便的进行课程的选择与撤销以及查看课程的信息与成绩，使老师更加方便查看所教授课程的信息和登记学生的成绩，使管理员更加方便进行开设课程以及加课和撤课。

#### &emsp;&emsp;1.2. 应用目标

&emsp;&emsp;高校学生，老师以及教秘。

#### &emsp;&emsp;1.3. 作用范围

&emsp;高校

### 2. 运行环境

### 3. 用户特点

&emsp;&emsp;学生：该系统主要为学生提供选课服务，因此学生可以直接查看选课情况，学生可以根据本人学号和密码登陆系统，进行选课和撤课操作，查看课程信息，查看考试成绩等。

&emsp;&emsp;老师：在该系统中，为方便教师工作，要求教师能够查看自己信息，查询所授课程的信息，最后登记学生的成绩。

&emsp;&emsp;管理员：负责整个课表的维护，包括开设课程，生成课表。所设计的信息包括课程信息，教师信息和学生信息，新增学生和老师的信息。

### 4. 关键点

#### &emsp;&emsp;4.1 关键功能

#### &emsp;&emsp;4.2 关键算法

#### &emsp;&emsp;4.3 关键技术

***

## 功能需求

### 1. 用户故事

#### 1.1 作为一个学生我想要进行选课
&emsp;&emsp;描述：作为一个学生，我想要能够查看整个课程表信息，点击具体课程能够查看具体信息，查看自己已选的课的课程表，可查看自己的信息，能够根据课程名，老师和课程号来查询课程表。

&emsp;&emsp;验收标准：
1. 登陆时，使用自己的学号和密码登陆。
1. 如果在选课期间，则能进入选课界面，否则弹出提示，进入选课界面，应当是整个课程列表，点击某门课程弹出的应当是课程的具体信息，在搜索框输入课程名或者老师名或者课程号能够筛选出相应 的课程。
2. 点击选课按钮，如果该课程与当前已选课程没有冲突且余量充足，则加入自己的课程表；如果有冲突或者没有余量，则应当提示。
3. 进入自己的课程表时，应当有图表示和列表表示，点击撤课按钮，能够从当前课程表剔除。
4. 进入成绩表后，能够以列表的形式表示每门课的成绩。
5. 点击自己的信息，能够查看自己的信息以及修改密码。

#### 1.2 作为一个老师，我想要查看所授课程
&emsp;&emsp;描述：作为一个老师，我想要查看自己所授的整个课程表以及自己的信息，可以登记学生的成绩。
&emsp;&emsp;验收标准：
1. 登陆时，使用自己的学工号和密码登陆。
2. 进入界面后，能够查看自己所有所授的课程的课程表，同时以图和列表表示。
3. 点击某门具体的课，能够查看课程信息，包括这门课所有的学生信息，以及该门课的课程信息。
4. 进入登记成绩界面，显示出所有所授课程，以列表形式表示，点击进入某门课，展示出整个学生列表，在每个学生后输入该学生的成绩。
5. 点击自己的信息，能够查看自己的信息以及修改密码。

#### 1.3 作为一个管理员，我想要能够管理所有学生和老师和课程。
&emsp;&emsp;描述：作为一个管理员，我想要开设某门课程，增加学生和老师用户，加课与撤课。
&emsp;&emsp;验收标准：
1. 登陆时，使用自己的学工号和密码进行登陆。
2. 能够输入学生信息增加一名新生，输入老师信息增加一名老师。
3. 能够输入课程信息开设一门新课，如果与先前的课没有冲突，则增加成功，如果有冲突，则弹出提示。
4. 能够查看所有课程的信息，包括选择这门课的所有学生信息。能够通过课程名，课程号，老师名查询课程。
5. 当选课时间结束，学生要求强制加课或撤课，能够输入学生信息和课程信息，把该名学生添加到该课程。
6. 能够查看所有学生的所有成绩，能够通过学号查询学生。
7. 能够查看所有老师的信息，通过学工号查询老师。

*** 
### 2. 场景描述

&emsp;&emsp;小明同学在早上十点到夜晚12点的选课期间，进入选课系统进行选课，他输入自己的学号和密码进行登陆。登陆之后，他点击个人信息查看自己的信息，验证信息是否有误；之后进入选课界面，他点击一门数据库课程，查看该课程的信息，该课程由赵老师教授，地点在东校区，周一11-13节，他点击了选课按钮，将该课程加入到自己的课程表；随后查看当前已选课的课程表，发现数据库课程已选上，随后他进入了成绩界面，查看自己上学期课程的成绩，确认上学期所有课程的成绩无误后，最后退出登陆。

&emsp;&emsp;赵老师教授了一门数据库课程。赵老师输入自己的学工号和密码进入选课系统，随后查看自己当前学期所有教授课程的课程表，确认无误后，点击课程列表的数据库课程，查看数据库课程的信息，地点在东校区，周一11-13节，随后他点击学生信息，查看所有已选该课程的学生信息，发现小明同学选了这门课。随后他点击上学期所教课程的课程表，点击数据结构课程，给小明同学登记成绩，输入了59分。随后退出登陆。

&emsp;&emsp;赵老师跟王教秘说想要教授一门数据库课程，并将时间，地点告知了王教秘。王教秘输入自己的学工号和密码登陆选课系统，查看自己的信息，确认无误后，他点击了开设课程按钮，随后输入了课程信息，包括授课老师为赵老师，时间为周三11-13节，地点为东校区，确认后，该课程与其他课程的时间冲突，弹出提示，随后王教秘又重新输入时间为周一11-13节，确认后；随后查看所有课程的课程列表，发现数据库课程已开设，随后退出登陆。









# 需求分析 —— LZL部分

## 需求概述

### 运行环境

本系统需要运行在Linux(Ubuntu)系统下，并且需要安装以下软件：JDK11、PostgreSQL、Nginx等。

## 运行环境

### 软件环境

|            | 名称          | 版本     | 概述                                                                                        |
| ---------- | ------------- | -------- | ------------------------------------------------------------------------------------------- |
| 操作系统   | Ubuntu(Linux) | 20.04LTS | 您也可选Windows 10。                                                                        |
| 数据库平台 | PostgreSQL    | 14.2     | 为后端服务提供关系型数据库支持。                                                            |
| 应用平台   | Java          | JDK11    | 后端服务采用Java语言编写，并采用JDK11作为开发套件，所以可能需要最低版本为11的Java运行环境。 |
| Web容器    | Nginx         | 1.21.6   | 作为承载Web静态资源的容器，同时支持反向代理将API调用代理到后端服务上。                      |

您也可以在一台性能较好的服务器上安装`Docker`与`Docker Compose`，使用我们提供的`docker compose`配置，在`Docker`中运行本系统，无需考虑环境配置。

### 硬件环境

| 服务器       | 推荐配置                                 |
| ------------ | ---------------------------------------- |
| 应用服务器   | CPU核心数：2；内存：8GB                  |
| 数据库服务器 | CPU核心数：2；内存：4GB；数据容量：500GB |

## 需求规定

### 软件总体功能分析

本系统主要满足学生选撤课、教师调整课程等功能，需要满足以下要求：

- 管理用户的登录、注册、个人信息等。
- 可鉴别用户身份，区分用户角色，以便确定用户可进行的操作。比如学生是不可以进行开课操作的。
- 存储用户信息、课程信息、学期信息、学院信息等等。
- 根据用户角色的不同，可以完成选课、撤课、开课、强制选撤课、查看课程信息等功能。
- 可以完成复杂的课程查询，比如按学院查询、按教师查询，多个条件组合查询等。
- 学生可以查询自己已选课表、课程成绩等。

```mermaid
graph LR
  System[选课系统]
  
  User[用户模块]
  System --> User
  User --> 注册
  User --> 修改密码
  User --> 查询个人信息
  
  UserManagement[用户管理模块--管理员]
  System --> UserManagement
  UserManagement --> 添加用户
  UserManagement --> 删除用户
  UserManagement --> 查询用户
  UserManagement --> 修改用户信息

  Authentic[认证/授权模块]
  System --> Authentic
  Authentic --> 登录
  Authentic --> 校验角色

  Course[课程模块]
  System --> Course
    
    Course --> CourseQuery[课程查询及条件]
    CourseQuery --> 开课院系 --> 综合查询
    CourseQuery --> 开课教师 --> 综合查询
    CourseQuery --> 开课课头 --> 综合查询
    CourseQuery --> 是否有余量 --> 综合查询

    Course --> 选课
    Course --> 撤课
    Course --教师--> 查询选课学生
    Course --高权限--> 强制选课
    Course --高权限--> 强制撤课
  
  Schedule[课表模块--学生]
  System --> Schedule
  Schedule --> 查看课表
  Schedule --> 查询成绩
  Schedule --> 查询总评
```

### 功能需求

TODO：用例图、子用例图、用例描述（XYX/LZL）$$